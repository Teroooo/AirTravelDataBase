PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE COUNTRY(
ISO_CODE CHAR(2),
NAME VARCHAR(50),
PRIMARY KEY (ISO_CODE)
);
CREATE TABLE AIRPORT(
ID BIGINT,
NAME VARCHAR(50),
IATA CHAR(3),
ICAO CHAR(4),
LATITUDE DOUBLE,
LONGITUDE DOUBLE,
ISO_CODE CHAR(2),
PRIMARY KEY (ID),
FOREIGN KEY (ISO_CODE) REFERENCES COUNTRY(ISO_CODE)
);
CREATE TABLE PLANE_MODEL(
IATA CHAR(3),
NAME VARCHAR(50),
ICAO CHAR(4),
PRIMARY KEY(IATA)
);
CREATE TABLE PLANE(
ID BIGINT UNSIGNED,
CONDITION TINYINT,
TRACKING_CODE VARCHAR(30),
IATA CHAR(3),
PRIMARY KEY(ID),
FOREIGN KEY(IATA) REFERENCES PLANE_MODEL(IATA)
);
CREATE TABLE CONTRACT(
ID BIGINT,
AIRLINE_ID BIGINT,
PLANE_ID BIGINT,
START_DATE DATETIME,
END_DATE DATETIME,
PRIMARY KEY(ID),
FOREIGN KEY(AIRLINE_ID) REFERENCES AIRLINE(ID),
FOREIGN KEY(PLANE_ID) REFERENCES PLANE(ID)
);
CREATE TABLE OWN_CONTRACT(
CONTRACT_ID BIGINT,
PURCHASE_PRICE DECIMAL(19,4),
CURRENCY VARCHAR(3),
PRIMARY KEY(CONTRACT_ID),
FOREIGN KEY(CONTRACT_ID) REFERENCES CONTRACT(ID));
CREATE TABLE RENT_CONTRACT(
CONTRACT_ID BIGINT,
RENT_PER_DAY DECIMAL(19,4),
CURRENCY VARCHAR(3),
PRIMARY KEY(CONTRACT_ID),
FOREIGN KEY(CONTRACT_ID) REFERENCES CONTRACT(ID));
CREATE TABLE ROUTE(
ID BIGINT,
CODESHARE BOOLEAN,
STOPS TINYINT,
SOURCE_ID BIGINT,
DESTINATION_ID BIGINT,
AIRLINE_ID BIGINT,
PRIMARY KEY(ID),
FOREIGN KEY(SOURCE_ID) REFERENCES AIRPORT(ID),
FOREIGN KEY(DESTINATION_ID) REFERENCES AIRPORT(ID),
FOREIGN KEY(AIRLINE_ID) REFERENCES AIRLINE(ID)
);
CREATE TABLE FLIGHT(
ID BIGINT,
DEPARTURE_TIME DATETIME,
ARRIVAL_TIME DATETIME,
PLANE_ID BIGINT,
AIRLINE_ID BIGINT,
ROUTE_ID BIGINT,
PRIMARY KEY(ID),
FOREIGN KEY(PLANE_ID) REFERENCES PLANE(ID),
FOREIGN KEY(AIRLINE_ID) REFERENCES AIRLINE(ID),
FOREIGN KEY(ROUTE_ID) REFERENCES ROUTE(ID)
);
CREATE TABLE AIRLINE(
ID BIGINT,
NAME VARCHAR(50),
ALIAS VARCHAR(50),
IATA CHAR(3),
ICAO CHAR(4),
PARENT_ID BIGINT,
ISO_CODE CHAR(2),
PRIMARY KEY(ID),
FOREIGN KEY(PARENT_ID) REFERENCES AIRLINE(ID),
FOREIGN KEY(ISO_CODE) REFERENCES COUNTRY(ISO_CODE)
);
CREATE TABLE CREW_MEMBER(
ID BIGINT,
NAME VARCHAR(50),
FUNCTION TINYINT,
PRIMARY KEY(ID)
);
CREATE TABLE FLIGHT_CREW_MEMBER(
FLIGHT_ID BIGINT,
CREW_MEMBER_ID BIGINT,
PRIMARY KEY(FLIGHT_ID, CREW_MEMBER_ID),
FOREIGN KEY(FLIGHT_ID) REFERENCES FLIGHT(ID),
FOREIGN KEY(CREW_MEMBER_ID) REFERENCES CREW_MEMBER(ID)
);
COMMIT;
